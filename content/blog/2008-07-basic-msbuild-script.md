I spent some time with MSBuild this week... I actually like it (yea that's right, i said it!), but it did take me some time to figure out how to write a basic build script from scratch that can be used to build a solution and run the tests. Obviously, i wanted the script to assume as little as possible, so i could pretty much drop it any solution folder and use it as is. The only thing that is hardcoded is the path the nunit console runner but other than that, this should provide a good start for pretty much any project.

<code>
<div style="font-family: Consolas; font-size: 10pt; color: black; background: white;">
<p style="margin: 0px;"><span style="color: blue;">&lt;?</span><span style="color: #a31515;">xml</span><span style="color: blue;"> </span><span style="color: red;">version</span><span style="color: blue;">=</span>"<span style="color: blue;">1.0</span>"<span style="color: blue;"> </span><span style="color: red;">encoding</span><span style="color: blue;">=</span>"<span style="color: blue;">utf-8</span>"<span style="color: blue;"> ?&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&lt;</span><span style="color: #a31515;">Project</span><span style="color: blue;"> </span><span style="color: red;">DefaultTargets</span><span style="color: blue;">=</span>"<span style="color: blue;">Build</span>"<span style="color: blue;"> </span><span style="color: red;">xmlns</span><span style="color: blue;">=</span>"<span style="color: blue;">http://schemas.microsoft.com/developer/msbuild/2003</span>"<span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;</span><span style="color: #a31515;">Import</span><span style="color: blue;"> </span><span style="color: red;">Project</span><span style="color: blue;">=</span>"<span style="color: blue;">$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets</span>"<span style="color: blue;"> /&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;</span><span style="color: #a31515;">PropertyGroup</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &lt;</span><span style="color: #a31515;">Configuration</span><span style="color: blue;">&gt;</span>Debug<span style="color: blue;">&lt;/</span><span style="color: #a31515;">Configuration</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &lt;</span><span style="color: #a31515;">NUnitRunner</span><span style="color: blue;">&gt;</span>C:\Program Files\NUnit 2.4.7\bin\nunit-console.exe<span style="color: blue;">&lt;/</span><span style="color: #a31515;">NUnitRunner</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;/</span><span style="color: #a31515;">PropertyGroup</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;</span><span style="color: #a31515;">ItemGroup</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &lt;</span><span style="color: #a31515;">ProjectsToBuild</span><span style="color: blue;"> </span><span style="color: red;">Include</span><span style="color: blue;">=</span>"<span style="color: blue;">**\*.csproj</span>"<span style="color: blue;"> /&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;/</span><span style="color: #a31515;">ItemGroup</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;</span><span style="color: #a31515;">Target</span><span style="color: blue;"> </span><span style="color: red;">Name</span><span style="color: blue;">=</span>"<span style="color: blue;">BuildAll</span>"<span style="color: blue;"> </span><span style="color: red;">DependsOnTargets</span><span style="color: blue;">=</span>"<span style="color: blue;">Clean;CoreBuild;RunTests</span>"<span style="color: blue;">/&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;</span><span style="color: #a31515;">Target</span><span style="color: blue;"> </span><span style="color: red;">Name</span><span style="color: blue;">=</span>"<span style="color: blue;">CoreBuild</span>"<span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &lt;</span><span style="color: #a31515;">MSBuild</span><span style="color: blue;"> </span><span style="color: red;">Projects</span><span style="color: blue;">=</span>"<span style="color: blue;">@(ProjectsToBuild)</span>"<span style="color: blue;"> </span><span style="color: red;">ContinueOnError</span><span style="color: blue;">=</span>"<span style="color: blue;">false</span>"<span style="color: blue;"> </span><span style="color: red;">Properties</span><span style="color: blue;">=</span>"<span style="color: blue;">Configuration=$(Configuration)</span>"<span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: #a31515;">Output</span><span style="color: blue;"> </span><span style="color: red;">ItemName</span><span style="color: blue;">=</span>"<span style="color: blue;">BuildOutput</span>"<span style="color: blue;"> </span><span style="color: red;">TaskParameter</span><span style="color: blue;">=</span>"<span style="color: blue;">TargetOutputs</span>"<span style="color: blue;">/&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &lt;/</span><span style="color: #a31515;">MSBuild</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;/</span><span style="color: #a31515;">Target</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;</span><span style="color: #a31515;">Target</span><span style="color: blue;"> </span><span style="color: red;">Name</span><span style="color: blue;">=</span>"<span style="color: blue;">Clean</span>"<span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &lt;</span><span style="color: #a31515;">MSBuild</span><span style="color: blue;"> </span><span style="color: red;">Projects</span><span style="color: blue;">=</span>"<span style="color: blue;">@(ProjectsToBuild)</span>"<span style="color: blue;"> </span><span style="color: red;">ContinueOnError</span><span style="color: blue;">=</span>"<span style="color: blue;">false</span>"<span style="color: blue;"> </span><span style="color: red;">Targets</span><span style="color: blue;">=</span>"<span style="color: blue;">Clean</span>"<span style="color: blue;"> </span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span style="color: red;">Properties</span><span style="color: blue;">=</span>"<span style="color: blue;">Configuration=$(Configuration)</span>"<span style="color: blue;"> /&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;/</span><span style="color: #a31515;">Target</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;</span><span style="color: #a31515;">Target</span><span style="color: blue;"> </span><span style="color: red;">Name</span><span style="color: blue;">=</span>"<span style="color: blue;">RunTests</span>"<span style="color: blue;"> </span><span style="color: red;">DependsOnTargets</span><span style="color: blue;">=</span>"<span style="color: blue;">CoreBuild</span>"<span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &lt;</span><span style="color: #a31515;">CreateItem</span><span style="color: blue;"> </span><span style="color: red;">Include</span><span style="color: blue;">=</span>"<span style="color: blue;">**\Bin\Debug\*Tests*.dll</span>"<span style="color: blue;"> &gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &nbsp; &lt;</span><span style="color: #a31515;">Output</span><span style="color: blue;"> </span><span style="color: red;">TaskParameter</span><span style="color: blue;">=</span>"<span style="color: blue;">Include</span>"<span style="color: blue;"> </span><span style="color: red;">ItemName</span><span style="color: blue;">=</span>"<span style="color: blue;">TestAssemblies</span>"<span style="color: blue;"> /&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &lt;/</span><span style="color: #a31515;">CreateItem</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &nbsp; &lt;</span><span style="color: #a31515;">NUnit</span><span style="color: blue;"> </span><span style="color: red;">ToolPath</span><span style="color: blue;">=</span>"<span style="color: blue;">$(NUnitPath)</span>"<span style="color: blue;"> </span><span style="color: red;">Assemblies</span><span style="color: blue;">=</span>"<span style="color: blue;">@(TestAssemblies)</span>"<span style="color: blue;"> </span><span style="color: red;">DisableShadowCopy</span><span style="color: blue;">=</span>"<span style="color: blue;">true</span>"<span style="color: blue;"> /&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">&nbsp; &lt;/</span><span style="color: #a31515;">Target</span><span style="color: blue;">&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">&lt;/</span><span style="color: #a31515;">Project</span><span style="color: blue;">&gt;</span></p>
</div>
</code>

it uses the <a href="http://msbuildtasks.tigris.org/">MSBuild Community tasks</a> btw... Like i said, this is a very basic script. It only builds your solution and it runs all of your tests. That's it. No packaging of the output, no code coverage (if you're really doing TDD, code coverage is useless anyway), no whatever else you can think of.  But you can easily add all of that stuff of course :)

Now watch me get flamed for not using nant :P