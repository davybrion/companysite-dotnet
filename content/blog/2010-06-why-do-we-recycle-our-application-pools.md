<p>I’ve never understood why IIS by default configures newly created application pools to recycle every 1740 minutes.&#160; That means that by default, our ASP.NET applications are restarted every 29 hours.&#160; And for what?&#160; Are we, the .NET community, so bad that we really can’t write code that can keep running without problems for more than 29 hours?&#160; Well, considering the overall lack of knowledge regarding memory management in .NET, i actually wouldn’t be surprised if that turned out to be the case for a very large portion of .NET development teams.</p>  <p>And indeed, if you browse the web to find the reason why application pools are configured to recycle automatically periodically, you’ll be hard pressed to find a reasonable answer that doesn’t pertain to memory issues.&#160; It’s like the community in general has pretty much accepted the fact that our web applications (or service layers hosted in IIS) will need to be recycled to avoid memory problems.&#160; To make things worse, i’ve frequently seen people discuss workarounds on how to keep things working properly after an application pool recycle in mailinglists for various projects.&#160; And again i ask myself: why?</p>  <p>I’ve always been of the opinion that if your code requires periodic restarts to keep working correctly, then something is <em>clearly wrong</em>.&#160; There is a bug in your code somewhere and you need to fix <em>that</em>, instead of restarting the process occasionally to make the problem ‘go away’.&#160; Guess what, it’s not going away, and if the load on your application increases, the problem will only pop up more frequently.&#160; So what are you going to do about that? Make the application pool recycle even more frequently?&#160; Put in another server to share the load?&#160; Perhaps we should focus more on fixing the actual code.&#160; You’re leaking resources somewhere, and <em>that</em> is what you need to fix.</p>  <p>In my company, it’s just standard procedure to disable application pool recycling on all application pools.&#160; Our applications simply <em>have</em> to keep working without application pool recycles.&#160; It’s that simple.&#160; If we run into a memory leak that causes problems, we focus on the actual problem and we fix it.&#160; We’ve ran into plenty of memory leaks (though it hasn’t really happened a lot in the past year, guess why?) and we’ve fixed each and every single one of them that we’ve ran into.&#160; Side note: i’m talking about .NET code that is running on the server.&#160; While i’m pretty sure that we do better at memory management in our Silverlight clients than most other Silverlight-using-shops do, you just never know for sure with Silverlight, partly because there are so many memory leaks in Silveright <em>itself</em>.&#160; But for .NET code running on a server, a memory leak is simply inexcusable in my opinion.&#160; I mean, it can happen to the best of us (i’m pretty much responsible for most of ours to be honest), but it’s not about who introduced the memory leak.&#160; It’s all about how you <em>deal with it</em>.&#160; And recycling the application pool periodically is <em>not</em> dealing with it, it’s living in denial. </p>  <p>The only viable reason to recycle application pools that i can think of is in the situation of a shared hosting provider.&#160; If you’re offering shared hosting, it only makes sense to recycle application pools occasionally since it’s quite realistic to assume that most of those application pools will not be in use constantly.&#160; If a pool is recycled, it will not consume any resources until the next request for an application in that pool is received.&#160; In the context of shared hosting, that actually makes sense.&#160; In the context of real applications, that makes little sense unless you’re hosting a lot of them and plenty of them are hardly being used.&#160; Still, is that really a good enough reason to enabling application pool recycling by default?&#160; I obviously don’t think so.</p>  <p>In my opinion, we, as a community, really need to start focusing more on <a href="http://davybrion.com/blog/2008/08/net-memory-management/" target="_blank">memory management in .NET</a> and on making sure that our applications can <em>keep running without problems.</em></p>