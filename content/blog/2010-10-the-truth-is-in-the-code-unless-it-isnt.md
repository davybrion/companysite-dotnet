I'm sure you've all heard phrases like "the truth is in the code" or "only the code is the truth" and stuff like that. These statements are typically used to make it clear that you can't just rely on documentation (which is very likely to be outdated anyway, if not downright incomplete) and that you need to look at the actual source code to know what a piece of software is doing in a certain situation.  And in most cases, the code is indeed the truth.  But I just wanted to share a little story from my past on this topic.

I was working at a client's office and one of their development policies/rules was to use stored procedures for <em>everything</em> you do with the database.  Every single CRUD operation and every single query had to be done through stored procedures.  During my time there, I was given the choice to either extend and 'refactor' (it was such a mess it would've been more like refracturing) an existing system, or to just rewrite it.  I chose the rewrite option but since there wasn't any documentation at all, I had to figure out the behavior of the system by going through the current source code... which was in a pretty bad shape (hence the decision to rewrite instead of going forward with that code).  But as bad as the code was, it was possible (though sometimes frustrating) to figure out what it was doing.

Except for one particular piece of code.  I don't remember the actual details but there was a certain situation where the system should've created a new record, but for some reason it didn't.  The code was (for once) very clear: it called a stored procedure to create a new record.  But at runtime, I could never get it to insert that record at the time it should've been created.  I actually spent about 2 hours debugging, going over the possibilities of why it wouldn't create that record even though the code was clearly telling me that it should've created a new record.

And then it hit me.  "What if the stored procedure is silently preventing this insert?".  Every single stored procedure that I had seen/reviewed from that system didn't contain any logic at all.  They were all very straightforward and didn't do anything but the actual database operation.  But for some reason, this insert stored procedure had a simple IF statement and it was silently ignoring a set of inserts based on a certain condition (the actual reason behind that IF statement was something I never figured out).  I felt like an idiot for wasting time on that without checking with the stored procedure first, but then again, I didn't really have any reason to suspect the stored procedure since they normally didn't contain any logic.

In this case, the code did <em>not</em> contain the truth and actually caused me to waste time believing something would be the case when it wasn't.  That just goes to show that as soon as an external system is involved which may contain additional logic which isn't immediately visible from the code, there is a small chance that the code is actually lying to you.