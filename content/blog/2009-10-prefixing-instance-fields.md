I was talking to a friend the other day about prefixing instance fields.  His opinion was that by prefixing instance field names (with an underscore for example) you have the benefit of immediately showing the difference in scope between the usages of a local variable in a method, or the usage of an instance field.  

There is indeed a legitimate possible problem here: any possible mutation of an instance field in a method can have an intended or unintended impact somewhere else in the class since the mutation will outlive the duration of the method call.  So it is important to be aware of this and that you are entirely sure that any possible mutation is actually intended and that no unintended mutations will occur because of some faulty code in a method.  I don't however think that prefixing field names is the best solution to avoid this problem.  There are two practices that I recommend to easily avoid unintended mutations of fields in methods.  

The first is to use as few fields as possible.  To avoid any misunderstandings: I'm not saying that you shouldn't use fields!  I'm just saying that fields need to justify their existence.  Fields inherently make up the state of an object, so if you don't need a particular piece of data to hang around longer than say, the duration of a method call, then don't put that data in a field.  If you need to access that data in another method that will be called from the originally called method you can simply pass it to the other method with a method parameter.  If you notice that you're frequently passing the same pieces of data to a couple of methods, then you probably need to <a href="http://www.refactoring.com/catalog/introduceParameterObject.html">introduce a parameter object</a>.  Simply put: do not use fields unless the data you want to store in them are an inherent part of the object and the data needs to hang around <strong>for a while</strong>.

The second practice is too keep your methods short and focused.  If you're working with large methods, then I can certainly understand why you would want all the help you can get to easily spot mutations of fields.  There's only one question: why are you working with large methods?  There are truly very few legitimate reasons for not splitting up large methods into separate reusable methods.  When you use many small methods instead of large methods, <strong>it's much easier to keep your focus on what any particular piece of code is supposed to do, and what it's really doing</strong>.  And if your methods are short, you will very easily see when a field is being used instead of a local variable.

The combination of these two approaches leads to a lot less unintended mutations of fields.  And as a bonus, you get a lot more readable and maintainable code as well.  If however you still like to get some visual help in identifying field usage in methods, you can enable the Color Identifiers feature in Resharper (available in the Options window under Code Inspection - Settings - Color identifiers) which will result in fields being represented with a different color from regular variables. 

What do you think about this? Do you still prefer to prefix field names, and if so, why?
